# Frontend Development Dockerfile
# Multi-stage build for optimal development experience
# Uses bun's efficient dependency management (no node_modules needed)

FROM oven/bun:latest AS base
WORKDIR /app

# Install dependencies using bun
# Note: bun creates node_modules for compatibility with tools like vite
COPY package.json bun.lockb* ./
RUN bun install --frozen-lockfile || bun install

# Development stage
FROM base AS development
EXPOSE 3000
EXPOSE 5173

# Copy source code (will be mounted as volume in compose)
# Note: bun stores dependencies globally, so mounting source won't overwrite them
COPY . .

# Ensure dependencies are available even after mount
# Run Vite dev server with hot-reload via bun
# Vite config already sets port 3000 and host 0.0.0.0
CMD ["bun", "run", "dev"]

